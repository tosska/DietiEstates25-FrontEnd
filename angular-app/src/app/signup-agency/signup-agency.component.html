<div class="container mx-auto p-6">
  <h1 class="text-2xl font-bold mb-6 text-[#1B1B1B] dark:text-[#A5D6A7]">Registrazione Agenzia</h1>

  <!-- Progress Bar -->
  <div class="flex justify-between mb-6">
    <div class="flex-1 text-center" [ngClass]="{'text-[#2E7D32] dark:text-[#81C784]': currentStep >= 1}">1. Account Manager</div>
    <div class="flex-1 text-center" [ngClass]="{'text-[#2E7D32] dark:text-[#81C784]': currentStep >= 2}">2. Indirizzo</div>
    <div class="flex-1 text-center" [ngClass]="{'text-[#2E7D32] dark:text-[#81C784]': currentStep >= 3}">3. Dati Agenzia</div>
  </div>

  <!-- Step 1: Account Manager -->
  <div *ngIf="currentStep === 1" class="bg-white dark:bg-[#121212] p-6 rounded-lg shadow-md">
    <h2 class="text-xl font-semibold mb-4">Crea il tuo account</h2>
    <form [formGroup]="step1" (ngSubmit)="nextStep()">
      <div class="mb-4">
        <label for="email" class="block text-sm font-medium text-[#1B1B1B] dark:text-[#F1F1F1]">Email</label>
        <input id="email" formControlName="email" type="email" class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-[#4CAF50] dark:focus:border-[#66BB6A] p-2 dark:bg-[#1E1E1E] dark:text-[#F1F1F1]">
        <div *ngIf="step1.get('email')?.invalid && step1.get('email')?.touched" class="text-red-500 text-sm">Email richiesta</div>
      </div>
      <div class="mb-4">
        <label for="password" class="block text-sm font-medium text-[#1B1B1B] dark:text-[#F1F1F1]">Password</label>
        <input id="password" formControlName="password" type="password" class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-[#4CAF50] dark:focus:border-[#66BB6A] p-2 dark:bg-[#1E1E1E] dark:text-[#F1F1F1]">
        <div *ngIf="step1.get('password')?.invalid && step1.get('password')?.touched" class="text-red-500 text-sm">Password richiesta (min 6 caratteri)</div>
      </div>
      <button type="submit" class="bg-[#4CAF50] text-white py-2 px-4 rounded hover:bg-[#2E7D32] dark:bg-[#66BB6A] dark:hover:bg-[#43A047]">Avanti</button>
    </form>
  </div>

  <!-- Step 2: Indirizzo con Mappa -->
  <div *ngIf="currentStep === 2" class="bg-white dark:bg-[#121212] p-6 rounded-lg shadow-md">
    <h2 class="text-xl font-semibold mb-4">Seleziona l'indirizzo</h2>
    <form [formGroup]="step2" (ngSubmit)="nextStep()">
      <div class="mb-4">
        <label class="block text-sm font-medium text-[#1B1B1B] dark:text-[#F1F1F1]">Seleziona sulla mappa</label>
        <div id="map" class="h-64 w-full rounded-md border-gray-300 dark:border-gray-600"></div>
      </div>
      <div class="mb-4">
        <label for="street" class="block text-sm font-medium text-[#1B1B1B] dark:text-[#F1F1F1]">Via</label>
        <input id="street" formControlName="street" class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-[#4CAF50] dark:focus:border-[#66BB6A] p-2 dark:bg-[#1E1E1E] dark:text-[#F1F1F1]">
      </div>
      <div class="mb-4">
        <label for="city" class="block text-sm font-medium text-[#1B1B1B] dark:text-[#F1F1F1]">Città</label>
        <input id="city" formControlName="city" class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-[#4CAF50] dark:focus:border-[#66BB6A] p-2 dark:bg-[#1E1E1E] dark:text-[#F1F1F1]">
      </div>
      <div class="mb-4">
        <label for="postalCode" class="block text-sm font-medium text-[#1B1B1B] dark:text-[#F1F1F1]">CAP</label>
        <input id="postalCode" formControlName="postalCode" class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-[#4CAF50] dark:focus:border-[#66BB6A] p-2 dark:bg-[#1E1E1E] dark:text-[#F1F1F1]">
      </div>
      <div class="mb-4">
        <label for="state" class="block text-sm font-medium text-[#1B1B1B] dark:text-[#F1F1F1]">Regione</label>
        <input id="state" formControlName="state" class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-[#4CAF50] dark:focus:border-[#66BB6A] p-2 dark:bg-[#1E1E1E] dark:text-[#F1F1F1]">
      </div>
      <div class="mb-4">
        <label for="unitDetail" class="block text-sm font-medium text-[#1B1B1B] dark:text-[#F1F1F1]">Dettagli Unità</label>
        <input id="unitDetail" formControlName="unitDetail" class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-[#4CAF50] dark:focus:border-[#66BB6A] p-2 dark:bg-[#1E1E1E] dark:text-[#F1F1F1]">
      </div>
      <div class="mb-4">
        <label for="latitude" class="block text-sm font-medium text-[#1B1B1B] dark:text-[#F1F1F1]">Latitudine</label>
        <input id="latitude" formControlName="latitude" type="number" step="0.000001" class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-[#4CAF50] dark:focus:border-[#66BB6A] p-2 dark:bg-[#1E1E1E] dark:text-[#F1F1F1]">
      </div>
      <div class="mb-4">
        <label for="longitude" class="block text-sm font-medium text-[#1B1B1B] dark:text-[#F1F1F1]">Longitudine</label>
        <input id="longitude" formControlName="longitude" type="number" step="0.000001" class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-[#4CAF50] dark:focus:border-[#66BB6A] p-2 dark:bg-[#1E1E1E] dark:text-[#F1F1F1]">
      </div>
      <button type="button" (click)="prevStep()" class="bg-gray-300 text-black py-2 px-4 rounded mr-2 hover:bg-gray-400">Indietro</button>
      <button type="submit" class="bg-[#4CAF50] text-white py-2 px-4 rounded hover:bg-[#2E7D32] dark:bg-[#66BB6A] dark:hover:bg-[#43A047]">Avanti</button>
    </form>
  </div>

  <!-- Step 3: Dati Agenzia -->
  <div *ngIf="currentStep === 3" class="bg-white dark:bg-[#121212] p-6 rounded-lg shadow-md">
    <h2 class="text-xl font-semibold mb-4">Dati dell'Agenzia</h2>
    <form [formGroup]="step3" (ngSubmit)="onSubmit()">
      <div class="mb-4">
        <label for="phone" class="block text-sm font-medium text-[#1B1B1B] dark:text-[#F1F1F1]">Telefono</label>
        <input id="phone" formControlName="phone" class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-[#4CAF50] dark:focus:border-[#66BB6A] p-2 dark:bg-[#1E1E1E] dark:text-[#F1F1F1]">
        <div *ngIf="step3.get('phone')?.invalid && step3.get('phone')?.touched" class="text-red-500 text-sm">Telefono richiesto</div>
      </div>
      <div class="mb-4">
        <label for="description" class="block text-sm font-medium text-[#1B1B1B] dark:text-[#F1F1F1]">Descrizione</label>
        <textarea id="description" formControlName="description" class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-[#4CAF50] dark:focus:border-[#66BB6A] p-2 dark:bg-[#1E1E1E] dark:text-[#F1F1F1]"></textarea>
      </div>
      <div class="mb-4">
        <label for="vatNumber" class="block text-sm font-medium text-[#1B1B1B] dark:text-[#F1F1F1]">Partita IVA</label>
        <input id="vatNumber" formControlName="vatNumber" class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-[#4CAF50] dark:focus:border-[#66BB6A] p-2 dark:bg-[#1E1E1E] dark:text-[#F1F1F1]">
        <div *ngIf="step3.get('vatNumber')?.invalid && step3.get('vatNumber')?.touched" class="text-red-500 text-sm">Partita IVA richiesta</div>
      </div>
      <div class="mb-4">
        <label for="website" class="block text-sm font-medium text-[#1B1B1B] dark:text-[#F1F1F1]">Sito Web</label>
        <input id="website" formControlName="website" class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-[#4CAF50] dark:focus:border-[#66BB6A] p-2 dark:bg-[#1E1E1E] dark:text-[#F1F1F1]">
      </div>
      <button type="button" (click)="prevStep()" class="bg-gray-300 text-black py-2 px-4 rounded mr-2 hover:bg-gray-400">Indietro</button>
      <button type="submit" class="bg-[#4CAF50] text-white py-2 px-4 rounded hover:bg-[#2E7D32] dark:bg-[#66BB6A] dark:hover:bg-[#43A047]">Registrati</button>
    </form>
  </div>
</div>